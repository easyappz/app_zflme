version: 0.1.0
basePath: /api
description: |
  Base API schema for the HSE Navigation clone. Endpoints return JSON.
  Authentication is expected via headers (e.g., Bearer token) if needed.
  No cookies are used. This file must be updated on every backend change.

models:
  Campus:
    _id: string
    name: string
    code: string
    city: string
    location:
      lat: number
      lng: number
  Building:
    _id: string
    campusId: string
    name: string
    address: string
    location:
      lat: number
      lng: number
  Room:
    _id: string
    buildingId: string
    floor: number
    name: string
    number: string
    type: string

endpoints:
  # Campuses
  - path: /campuses
    method: GET
    request:
      query:
        page: number | optional
        limit: number | optional
        search: string | optional
    response:
      200:
        items: Campus[]
        total: number
        page: number
        limit: number
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /campuses/{id}
    method: GET
    request:
      params:
        id: string
    response:
      200:
        item: Campus
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /campuses
    method: POST
    request:
      body:
        name: string
        code: string
        city: string
        location:
          lat: number
          lng: number
    response:
      201:
        item: Campus
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /campuses/{id}
    method: PUT
    request:
      params:
        id: string
      body:
        name: string | optional
        code: string | optional
        city: string | optional
        location:
          lat: number | optional
          lng: number | optional
    response:
      200:
        item: Campus
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /campuses/{id}
    method: DELETE
    request:
      params:
        id: string
    response:
      204: {}
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  # Buildings
  - path: /buildings
    method: GET
    request:
      query:
        campusId: string | optional
        page: number | optional
        limit: number | optional
        search: string | optional
    response:
      200:
        items: Building[]
        total: number
        page: number
        limit: number
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /buildings/{id}
    method: GET
    request:
      params:
        id: string
    response:
      200:
        item: Building
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /buildings
    method: POST
    request:
      body:
        campusId: string
        name: string
        address: string
        location:
          lat: number
          lng: number
    response:
      201:
        item: Building
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /buildings/{id}
    method: PUT
    request:
      params:
        id: string
      body:
        campusId: string | optional
        name: string | optional
        address: string | optional
        location:
          lat: number | optional
          lng: number | optional
    response:
      200:
        item: Building
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /buildings/{id}
    method: DELETE
    request:
      params:
        id: string
    response:
      204: {}
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  # Rooms
  - path: /rooms
    method: GET
    request:
      query:
        buildingId: string | optional
        floor: number | optional
        page: number | optional
        limit: number | optional
        search: string | optional
    response:
      200:
        items: Room[]
        total: number
        page: number
        limit: number
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /rooms/{id}
    method: GET
    request:
      params:
        id: string
    response:
      200:
        item: Room
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /rooms
    method: POST
    request:
      body:
        buildingId: string
        floor: number
        name: string
        number: string
        type: string
    response:
      201:
        item: Room
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /rooms/{id}
    method: PUT
    request:
      params:
        id: string
      body:
        buildingId: string | optional
        floor: number | optional
        name: string | optional
        number: string | optional
        type: string | optional
    response:
      200:
        item: Room
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  - path: /rooms/{id}
    method: DELETE
    request:
      params:
        id: string
    response:
      204: {}
      404:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  # Search
  - path: /search
    method: GET
    request:
      query:
        q: string
        scope: string | optional # campuses|buildings|rooms
        limit: number | optional
    response:
      200:
        results: []
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional

  # Navigation
  - path: /navigation/route
    method: POST
    request:
      body:
        startRoomId: string
        endRoomId: string
        preferences: object | optional
    response:
      200:
        route: []
        distance: number
        time: number
      4xx:
        error: string
        message: string
      5xx:
        error: string
        message: string
        stack: string | optional
